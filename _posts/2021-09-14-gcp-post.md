---
title: "Google Cloud Platform"
categories: 
  - programming
date: 2021-09-12 01:00:00 +0900
last_modified_at: 2021-09-12 01:00:00 +0900
---

### Google Cloud Platform
GCPë€
https://www.edureka.co/blog/what-is-google-cloud-platform/

ì§€ì—­
https://cloud.google.com/about/locations/

## GCP ì‹œì‘í•˜ê¸°
https://cloud.google.com/free

zone  = google cloud data center
peoject ê³¼ê¸ˆë‹¨ìœ„
12ê°œ

orgainization -> foldr -> project -> resource

gcp interacting / web console, cloud shell cloud sdk, mobile app, rest api

iass: ì¸í”„ë¼ì œê³µ
pass: ì‘ìš©í”„ë¡œê·¸ë¨ ê°œë°œí™˜ê²½ ì œê³µ
sass: ì‘ìš©í”„ë¡œê·¸ë¨ ì œê³µ
https://medium.com/google-cloud/gcp-the-google-cloud-platform-compute-stack-explained-c4ebdccd299b

## compute services
### â€¢ app engine
app enigneì€ ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê´€ë¦¬í•´ì£¼ëŠ” engineìœ¼ë¡œ ì„œë²„ í”„ë¡œë¹„ì €ë‹ì„ ê´€ë¦¬í•´ì¤ë‹ˆë‹¤. (PASS - ì½”ë“œë§Œ ìˆìœ¼ë©´ ë¨)
í‘œì¤€í™˜ê²½ê³¼ ê°€ë³€í™˜ê²½ì´ ìˆìŠµë‹ˆë‹¤.
https://cloud.google.com/appengine/docs

í”„ë¡œë¹„ì €ë‹: https://ko.wikipedia.org/wiki/%ED%94%84%EB%A1%9C%EB%B9%84%EC%A0%80%EB%8B%9D

### â€¢ compute engine
compute engineì€ linux, window ê°€ìƒ ë¨¸ì‹ ì„ ë§Œë“¤ê³  ì‹¤í–‰í•˜ëŠ” engineì…ë‹ˆë‹¤. (IASS)
https://cloud.google.com/compute/docs

**\- ë””ìŠ¤í¬**  
vm ì‹¤í–‰ì„ ìœ„í•œ ë””ìŠ¤í¬ ê³µê°„ì…ë‹ˆë‹¤.
**\- ìŠ¤ëƒ…ìƒ·**  
ìŠ¤ëƒ…ìƒ·ì€ ì˜êµ¬ ë””ìŠ¤í¬ì˜ ë°±ì—…ì…ë‹ˆë‹¤. (ë°±ì—…ì— í•„ìš”í•œ ì •ë³´ë§Œ ë‹´ê³  ìˆê¸°ì— ë””ìŠ¤í¬ë³´ë‹¤ ìš©ëŸ‰ì´ ì‘ìŠµë‹ˆë‹¤.)  
**\- ì´ë¯¸ì§€**  
ì´ë¯¸ì§€ëŠ” vmì„ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ os ë° applicationì´ í¬í•¨ëœ ë””ìŠ¤í¬ì˜ ë³µì œë³¸ì…ë‹ˆë‹¤.  
https://cloud.google.com/compute/docs/images?hl=ko  
**\- ì¸ìŠ¤í„´ìŠ¤ í…œí”Œë¦¿**  
ì¸ìŠ¤í„´ìŠ¤ í…œí”Œë¦¿ì€ vm ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ í…œí”Œë¦¿ì…ë‹ˆë‹¤. í…œí”Œë¦¿ì„ í†µí•¸ ê°™ì€ vm ì¸ìŠ¤í„´ìŠ¤ ì—¬ëŸ¬ê°œë¥¼ ë§Œë“¤ ê±°ë‚˜, ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
https://cloud.google.com/compute/docs/instance-templates/?hl=ko  
**\- ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹**  
ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹ì€ ë¶€í•˜ë¶„ì‚° ë° ìë™í™•ì¥/ë³µêµ¬ë¥¼ ìœ„í•œ vm ì¸ìŠ¤í„´ìŠ¤ì˜ ì§‘í•©ì…ë‹ˆë‹¤.  
https://cloud.google.com/compute/docs/instance-templates/?hl=ko  

### â€¢ kubernetes engine
kubernetesë¡œ ì»¨í…Œì´ë„ˆí™”ëœ ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. (IASS & CASS)
https://cloud.google.com/kubernetes-engine/docs

### â€¢ cloud functions
ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì—†ì´, cloud ì´ë²¤íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. (PASS, FASS)
https://cloud.google.com/functions/docs



## storage services
### â€¢ cloud storage (bucketì¸ë“¯)
ë‹¤ì–‘í•œ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ” ì €ì¥ì†Œì…ë‹ˆë‹¤.
https://cloud.google.com/storage/docs?hl=ko
storage ì¢…ë¥˜
standard
nearline
coldline

ê°€ê²©
https://cloud.google.com/storage/pricing?hl=ko&_ga=2.111727620.-1811355943.1631629246&_gac=1.262478334.1631716187.Cj0KCQjws4aKBhDPARIsAIWH0JUXkL3ysTUGd1q7AP9fqEZVC8jSDFzaNUWWZKqBhuLJTDEvEIX7yoEaAtj4EALw_wcB#asia

### â€¢ persistent disk
(cloud storageë‘ ì°¨ì´ê°€ ëª¨ì§€...) ë¸”ë¡ ì €ì¥ì†Œ..?
https://cloud.google.com/compute/docs/disks?hl=ko
gce vmì— ë¶™ì–´ìˆìŒ (ì„œë²„ì• í”Œë¦¬ì¼€ì´ì…˜ì‹¤í–‰ì„ ìœ„í•œ ì €ì¥ê³µê°„ì´ë¼...)

### â€¢ cloud filestore?
ë‹¤ì–‘í•œ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ” ì €ì¥ì†Œì…ë‹ˆë‹¤.
https://cloud.google.com/filestore/docs?hl=ko

## network services
https://cloud.google.com/network-tiers/docs/overview?hl=ko
### â€¢ load balancer
https://cloud.google.com/load-balancing/docs?hl=ko
load balancer ì¢…ë¥˜
http(s) load balancer 
network loadbalancer
ìœ„ ë‘˜ë‹¤ external/internal ë¡œë“œë°¸ëŸ¬ã„´ì„œëŸ¬ ë¶„ë¦¬ë¨

### â€¢ hybrid connectivity
vmì˜ ì‚¬ì„¤ ë„¤íŠ¸ì›Œí¬ë§ì…ë‹ˆë‹¤.
https://cloud.google.com/vpc/docs?hl=ko

## identity management
IAM(Identity Access Management)ì€ ëˆ„ê°€(identity) ì–´ë–¤ Access(role) ê¶Œí•œì„ ê°€ì§€ëŠ” ì§€ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
https://cloud.google.com/iam/docs

members[who]
roles[what]
permission[which]

### â€¢ identity
**\- google account**  
ê°œì¸ ê³„ì •(user)ì…ë‹ˆë‹¤.  
**\- sevice account**  
application ë˜ëŠ” vmì— ì†í•œ ê³„ì •ì…ë‹ˆë‹¤.  
**\- google group**  
ê°œì¸ ê³„ì •(user)ë“¤ì˜ ì§‘í•©ì…ë‹ˆë‹¤.  
**\- g suite domain**  
**\- cloud identity domain**  
**\- allAuthenticatedUsers**  
**\- allUsers**  

### â€¢ permission
rosourceì— í—ˆìš© ê°€ëŠ¥í•œ ì‘ì—…ì„ ì •ì˜í•©ë‹ˆë‹¤.
\<service>.\<resource>.\<verb>  
pubsub.subsriptions.consume  
compute.instances.insert  

### â€¢ role
roleì€ permissionì˜ ì§‘í•©ì…ë‹ˆë‹¤.
primitive role
**\- owner**  
**\- editor**  
**\- viewer**  

predefined role
**\-roles/pubsub.publisher**
**\-roles/compute.admin**
**\-roles/storage.objectAdmin**

custom role
**\-collection of assorted set of permissions**
**\-fine-grained access to resources** 

## database services
### â€¢ cloud sql
rdbms(mysql, postgresql)ë¥¼ ê´€ë¦¬í•˜ëŠ” cloud ì €ì¥ì†Œ/ì„œë²„ì…ë‹ˆë‹¤.
https://cloud.google.com/sql/docs
### â€¢ cloud bigtable
nosqlì„ ê´€ë¦¬í•˜ëŠ” cloud ì €ì¥ì†Œ/ì„œë²„ì…ë‹ˆë‹¤.
https://cloud.google.com/bigtable/docs
### â€¢ cloud spanner
https://cloud.google.com/spanner/docs
### â€¢ cloud memorystore
in-memory store(redis)ë¥¼ ê´€ë¦¬í•˜ëŠ” cloud ì €ì¥ì†Œ/ì„œë²„ì…ë‹ˆë‹¤.
https://cloud.google.com/memorystore/docs/redis




https://medium.com/@jwlee98/gcp-dns-%EB%B6%80%ED%84%B0-%ED%95%98%EB%82%98%EC%94%A9-google-cloud-%EB%A1%9C-%EC%84%9C%EB%B9%84%EC%8A%A4-%ED%95%B4%EB%B3%B4%EA%B8%B0-2%ED%83%84-google-cloud-load-balancing-gclb-56151d9efe0e

gcp ë¡œë“œë°¸ëŸ°ì‹±
https://ozofweird.tistory.com/entry/GCP-%EC%9B%90%EB%8D%B0%EC%9D%B4-%EB%AC%B4%EC%A4%91%EB%8B%A8-%EB%B0%B0%ED%8F%AC-%ED%99%98%EA%B2%BD?category=942810

gcp ë¡œë“œë°¸ëŸ°ì‹±
https://www.bespinglobal.com/gcp-autoscaling-webserver/


## gcpë¡œ infra ë§Œë“¤ê¸°
ğŸ” ubuntu ê¸°ë°˜ìœ¼ë¡œ ì„¤ëª…ë©ë‹ˆë‹¤.
### â€¢ compute engine ë§Œë“¤ê¸° ë° ì„¤ì •
**\- vm ë§Œë“¤ê¸°**  
vm instanceì—ì„œ compute engineì„ ë§Œë“­ë‹ˆë‹¤.  

ğŸ” ssh ì„¤ì •í•˜ê¸°  
1\. ssh key ë§Œë“¤ê¸°
ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´, ë¹„ë°€í‚¤(gcp_key)ì™€ ê³µê°œí‚¤(gcp_public_key)ê°€ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.
```sh
$ ssh-keygen -t rsa -f ~/ssh/gcp_key -C skunkworksflightcontrol@gmail.com
# $ ssh-keygen -t rsa -f [í‚¤ë¥¼ ë§Œë“¤ ê²½ë¡œ] -C [GCPê³„ì •@gmail.com]
```
2\. ê³µê°œí‚¤ ë“±ë¡  
ë©”íƒ€ë°ì´í„°ì— ê³µê°œí‚¤ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.  

3\. ì›ê²© ì ‘ì†  
gcp ê³„ì •
```sh
ssh -i gcp_key skunkworksflightcontrol@34.64.241.214
# $ ssh -i [ê³µê°œí‚¤] [GCPê³„ì •] @[vm ip ì£¼ì†Œ]
```

ë©”íƒ€ë°ì´í„°ì— ê³µê°œí‚¤ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

ğŸ“” ì°¸ê³ ìë£Œ
â€¢ gcp ssh ì„¤ì •
https://kibua20.tistory.com/100


**\- docker ì„¤ì¹˜í•˜ê¸°**
\- centos
https://docs.docker.com/engine/install/centos/
ì´ì „ì— ì„¤ì¹˜ëœ dockerë¥¼ ì •ë¦¬(ì œê±°)í•©ë‹ˆë‹¤.
```sh
$sudo yum remove docker \
                docker-client \
                docker-client-latest \
                docker-common \
                docker-latest \
                docker-latest-logrotate \
                docker-logrotate \
                docker-engine
```
yum-utilsë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.
```sh
$sudo yum install -y yum-utils
```
docker ì €ì¥ì†Œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
```sh
$sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
```
dockerë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.
```
 sudo yum install docker-ce docker-ce-cli containerd.io
```

```
sudo systemctl start docker
```

\- ubuntu
https://docs.docker.com/engine/install/ubuntu/
ê¸°ì¡´ì— ìˆëŠ” dockerë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.
```
$ sudo apt-get remove docker docker-engine docker.io containerd runc
```

```
$ sudo apt-get update
$ sudo apt-get install \
    apt-transport-https \
    ca-certificates \
    curl \
    gnupg \
    lsb-release
```

```
$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
```
```
$ echo \
  "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
```
```
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io
```

**\- docker compose ì„¤ì¹˜í•˜ê¸°**
https://docs.docker.com/compose/install/
```
$ sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
```
```
$ sudo chmod +x /usr/local/bin/docker-compose
```

**\- node ì„¤ì¹˜í•˜ê¸°**

**\- yarn ì„¤ì¹˜í•˜ê¸°**

**\- jenkins ì„¤ì¹˜í•˜ê¸°**
jenkinsëŠ” docker ì´ë¯¸ì§€ë¡œ ì„¤ì¹˜í•©ë‹ˆë‹¤.
```
docker pull jenkins/jenkins
```


ğŸ” docker private repositoryì—ì„œ imageë¥¼ ê°€ì ¸ì˜¨ë‹¤ë©´, docker ì €ì¥ì†Œì— ë¡œê·¸ì¸í•©ë‹ˆë‹¤.
```
dokcker login --username [dokcer hub ê³„ì •]
```


**\- snapshot ë§Œë“¤ê¸°**
**\- image ë§Œë“¤ê¸°**
**\- instance template ë§Œë“¤ê¸°**
**\- instance group ë§Œë“¤ê¸°**


### â€¢ network
**\- load balancer ë§Œë“¤ê¸°**





kms
https://ichi.pro/ko/google-cloud-kmsleul-sayonghayeo-bimil-eul-bohohago-gwanlihaneun-bangbeob-70233660978329
**kms**
https://console.cloud.google.com/marketplace/product/google/secretmanager.googleapis.com?returnUrl=%2Fsecurity%2Fsecret-manager%3Fauthuser%3D2%26hl%3Dko%26project%3Dperceptive-net-326014&authuser=2&hl=ko&project=perceptive-net-326014


https://puzzle-puzzle.tistory.com/entry/%EA%B5%AC%EA%B8%80-%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%ED%94%8C%EB%9E%AB%ED%8F%BC-GCP-load-balancing-and-autoscailing

ì¿ ë²„ë„¤í‹°ìŠ¤
https://ithub.tistory.com/249

gcp
https://www.edureka.co/blog/google-cloud-services/


### vpc
ë°©í™”ë²½ì€ vpcë³„ë¡œ ì„¤ì •í•´ì•¼, ì™¸ë¶€ì—ì„œ ì ‘ì†ê°€ëŠ¥

### redis
vpcê°€ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ redisì— ì ‘ê·¼ ê°€ëŠ¥