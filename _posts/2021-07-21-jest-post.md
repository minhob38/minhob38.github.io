---
title: "Jest"
categories: 
  - programming
date: 2021-07-20 01:00:00 +0900
last_modified_at: 2021-07-20 01:00:00 +0900
---

# Jest
JestëŠ” JavaScript Frameworkì…ë‹ˆë‹¤.

[ğŸ” Mochaì™€ ë¹„êµ]()To Do ...

## í™˜ê²½ì„¤ì •

### â€¢ ì„¤ì¹˜
`npm install --save-dev jest` ë˜ëŠ” `yarn add --dev jest`ë¥¼ í†µí•´ ì„¤ì¹˜í•©ë‹ˆë‹¤.

### â€¢ ì‹¤í–‰
ì „ì—­ìœ¼ë¡œ ì„¤ì¹˜í–ˆë‹¤ë©´ `jest [test file]`, íŒ¨í‚¤ì§€ì— ì„¤ì¹˜í–ˆë‹¤ë©´ `package.json scriptì˜ testë¥¼ ìˆ˜ì •í•˜ì—¬` `npm run test`ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.

### â€¢ ì„¤ì •
**\- jest.config.js**
```
  testEnvironment: "node",
  setupFilesAfterEnv: ["./jest.setup.js"],
  transform: {
    '^.+\\.js?$': 'babel-jest',
    '^.+\\.ts?$': 'ts-jest'
  }
```
[\- testEnvironment](https://jestjs.io/docs/configuration#testenvironment-string)ë¡œ test í™˜ê²½ì„ ì •ì˜í•©ë‹ˆë‹¤.  
[\- setupfilesAferEnv](https://jestjs.io/docs/configuration#setupfilesafterenv-array)ë¡œ ëª¨ë“  test fileì˜ ì‹¤í–‰ í™˜ê²½ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
[\- moduleFileExtensions](https://jestjs.io/docs/configuration#modulefileextensions-arraystring)ë¡œ module íŒŒì¼ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
[\- testMatch](https://jestjs.io/docs/configuration#testmatch-arraystring)ë¡œ testí•  íŒŒì¼ë“¤ì„ ì •ì˜í•©ë‹ˆë‹¤.  
[\- transfrom](https://jestjs.io/docs/configuration#transform-objectstring-pathtotransformer--pathtotransformer-object)ìœ¼ë¡œ nodejsê°€ ì½ì„ ìˆ˜ ìˆëŠ” í˜•íƒœë¡œ Complie/Transpile ì„¤ì •ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
[\- transformIgnorePattern](https://jestjs.io/docs/configuration#transformignorepatterns-arraystring)ë¡œ Complie/Transpile í•˜ì§€ ì•Šì„ íŒŒì¼ë“¤ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

jest-extendedë¥¼ ì‚¬ìš©í•œë‹¤ë©´, 
setupFilesAfterEnv: ["./jest.setup.js", 'jest-extended']ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
## Test í•¨ìˆ˜
### â€¢ describe
test suiteë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

### â€¢ test (it)
test caseë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

```js
describe("test suite", () => {
  test("test case", () => {
    // To Do
  });
  it("test case", () => {
    // To Do
  });
})
```
ğŸ” x, skip, onlyë¥¼ í†µí•´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì—¬ë¶€ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ë¹„êµ í•¨ìˆ˜
### â€¢ ê³µí†µ
**\- toEqual** : ì°¸ì¡° ìë£Œí˜•(ê°ì²´, ë°°ì—´)ì„ ë¹„êµí•©ë‹ˆë‹¤.  
**\- toBe** : ì›ì‹œ ìë£Œí˜•ì„ ë¹„êµí•©ë‹ˆë‹¤.

### â€¢ ì°¸/ê±°ì§“
**\- toBeNull** : Nullì¸ì§€ ë¹„êµí•©ë‹ˆë‹¤.  
**toBeTruthy**: Truthyì¸ì§€ ë¹„êµí•©ë‹ˆë‹¤.  
**toBeFalsy**: Falsyì¸ì§€ ë¹„êµí•©ë‹ˆë‹¤.  

### â€¢ ìˆ«ì
**\- toBeGreaterThan** : ê¸°ì¤€ë³´ë‹¤ ì´ˆê³¼ì¸ì§€ ë¹„êµí•©ë‹ˆë‹¤.  
**- toBeLessThan** : ê¸°ì¤€ë³´ë‹¤ ë¯¸ë§Œì¸ì§€ ë¹„êµí•©ë‹ˆë‹¤.  

### â€¢ ë¬¸ìì—´
**\- toContain** : í•´ë‹¹ ë¬¸ìì—´ì„ í¬í•¨í•˜ëŠ”ì§€ ë¹„êµí•©ë‹ˆë‹¤.


## Snapshot Test

í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œ ì°ì–´ë‘ê³ , ì´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í˜„ì¬ ê²°ê³¼ë¥¼ ë¹„êµë¥¼ í•¨ìœ¼ë¡œì¨ í…ŒìŠ¤íŠ¸í•¨

[https://jestjs.io/docs/snapshot-testing](https://jestjs.io/docs/snapshot-testing)

- **toMatchSnapshot**

ìŠ¤ëƒ…ìƒ·ì´ ì—†ìœ¼ë©´ ìƒì„±í•˜ê³ , ìˆìœ¼ë©´ ìŠ¤ëƒ…ìƒ·ì„ ë¹„êµí•¨

ğŸ” ìŠ¤ëƒ…ìƒ·ì€ ê°™ì€ ê²½ë¡œ `__snapshots__`í´ë”ì— íŒŒì¼ì´ë¦„ `.snap`íŒŒì¼ì„ ë§Œë“¬

[https://jestjs.io/docs/expect#tomatchsnapshotpropertymatchers-hint](https://jestjs.io/docs/expect#tomatchsnapshotpropertymatchers-hint)

## Mock Test
### â€¢ jest.fn
[jest.fn](https://jestjs.io/docs/jest-object#jestfnimplementation)ì€ [Mock Function](https://jestjs.io/docs/mock-function-api)ì„ ë§Œë“­ë‹ˆë‹¤. Mock í•¨ìˆ˜ëŠ” ì•„ë˜ APIë“¤ì„ í†µí•´ í•¨ìˆ˜ë¥¼ ëª¨ì‚¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**[\- mockReturnValue](https://jestjs.io/docs/mock-function-api#mockfnmockreturnvaluevalue)** : mock functionì˜ ë°˜í™˜ê°’ì„ ì •ì˜í•©ë‹ˆë‹¤.  
**[\- mockRejectedValue](https://jestjs.io/docs/mock-function-api#mockfnmockrejectedvaluevalue)** : rejectí•˜ëŠ” async í•¨ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.  
**[\- mockResolvedValue](https://jestjs.io/docs/mock-function-api#mockfnmockresolvedvaluevalue)**: resolvedí•˜ëŠ” async í•¨ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.  
**[\- mockReset](https://jestjs.io/docs/mock-function-api#mockfnmockreset)**: mockClearì— ì¶”ê°€ì ìœ¼ë¡œ mock functionì˜ return, implemationì„ ì œê±°í•©ë‹ˆë‹¤.  
**[\- mockClear](https://jestjs.io/docs/mock-function-api#mockfnmockclear)**: mock functionì˜ calls, instancesë¥¼ ì œê±°í•©ë‹ˆë‹¤.

## Expect Test
expectë¥¼ í†µí•´ assertion testë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### â€¢  í•¨ìˆ˜
**[\- toHaveBeenCalled](https://jestjs.io/docs/expect#tohavebeencalled)** : mock functionì´ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
**[\- toHaveBeenCalledWith](https://jestjs.io/docs/expect#tohavebeencalled)** : mock functionì´ íŠ¹ì • ì¸ìì™€ í•¨ê»˜ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
**[\- toHaveBeenCleedTimes](https://jestjs.io/docs/expect#tohavebeencalledtimesnumber)** : functionì´ ëª‡ë²ˆ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
**[\- toHaveReturnedTimes](https://jestjs.io/docs/expect#tohavereturnedtimesnumber)** : functionì´ ëª‡ë²ˆ ë°˜í™˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
**[\- toHaveReturnedWith](https://jestjs.io/docs/expect#tohavereturnedwithvalue)** : functionì´ ì–´ë–¤ ê°’ì„ ë°˜í™˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### â€¢ ê°ì²´
**[\- toStrictEqual](https://jestjs.io/docs/expect#tostrictequalvalue)** : ê°ì²´(ë‚´ìš©)ê°€ ê°™ì€ì§€ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
**[\- toHaveProperty](https://jestjs.io/docs/expect#tohavepropertykeypath-value)** : ê°ì²´ê°€ í•´ë‹¹ propertyë¥¼ ê°€ì§€ê³  ìˆëŠ”ì§€ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


## ì°¸ê³ ìë£Œ
[â€¢ Jest ì„¤ì •](https://velog.io/@xortm854/TDD%EB%A5%BC-%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90-2%ED%8E%B8TDD-%EC%84%A4%EC%A0%95ReactTypescript)

https://codewithhugo.com/jest-array-object-match-contain/
https://www.taniarascia.com/integration-testing-with-jest-typescript-objection/

https://medium.com/@ismailkuruca/how-to-effectively-write-integration-tests-with-nodejs-knex-postgres-bcaa60022080